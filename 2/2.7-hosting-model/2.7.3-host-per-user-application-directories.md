# 2.7.3 Host Per-User Application Directories

A location configured to use `user_dirs` will allow users on the system to create and manage their own Shiny applications and make them available in their home directories. This directive will host any application stored in an eligible user's `~/ShinyApps` directory publicly at a URL prefaced by their username.

This privilege can be restricted only to users of particular groups using the `members_of` restriction. For instance, the following configuration:

```text
run_as :HOME_USER:;

# Define the root location
location / {
  user_dirs;
  
  # Only allow members of the 'shinyUsers' group to host personal applications.
  members_of shinyUsers;
}
```

will, for any user who is a member of the `shinyUsers` group, publicly host any Shiny application available in the user's `~/ShinyApps` directory. For instance, if a user named `tina` who is a member of the `shinyUsers` group, has `/home/tina` as a home directory, and has an application called `shinyApp1` in `/home/tina/ShinyApps/`, that application would be available on this server at the URL `http://server.com/tina/shinyApp1`. Any other application in `/home/tina/ShinyApps/` would also be publically available at a similar URL.

The `user_dirs` setting will ultimately replace the `user_apps` setting. The two models are very similar, but differ in how they handle `run_as` settings. `user_apps` ignores the `run_as` setting and always runs applications as the user in whose home directory they exist. `user_dirs`, on the other hand, will respect the `run_as` setting. You can use the special `run_as` user `:HOME_USER:` to make `user_dirs` operate the same way as `user_apps` does; thus, the two following configurations would have an identical effect:

```text
location / {
  user_apps;
}
```

```text
location / {
  run_as :HOME_USER:;
  user_dirs;  
}
```

Note that, while Shiny Server supports the ability to run in `user_dirs` as a single user, this may require some tweaking to make it function correctly on your server. For instance, the following configuration:

```text
location / {
  run_as shiny;
  user_dirs;
}
```

would attempt to start the applications housed in your users' home directories as the `shiny` user. However, many distributions restrict access to users' private `/home` directories by default, meaning that the `shiny` user would not be able to read or write to the directories it needs to in order to run these applications properly.

